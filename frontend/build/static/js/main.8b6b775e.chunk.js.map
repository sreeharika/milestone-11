{"version":3,"sources":["pages/chat.js","components/activeUsers.js","components/messages.js","pages/join.js","App.js","index.js"],"names":["socket","ActiveUsers","className","id","this","props","users","map","user","index","key","Component","Messages","messages","filter","message","room","url","from","text","createdDate","initialState","newMsg","Chat","state","param","match","params","emit","setState","scopeThis","name","io","err","history","push","on","formattedTime","moment","format","results","length","scrollToBottom","console","log","listHeight","document","querySelector","messagesList","newMessage","messagesWrapperHeight","clientHeight","scrollTop","scrollHeight","offsetHeight","previousSibling","scrollTo","e","target","value","preventDefault","obj","data","clearForm","to","onSubmit","placeholder","autoComplete","onChange","inputUpdate","bind","type","withRouter","Join","onClick","join","App","site_loaded","classNames","path","component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8b6b775e.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport ActiveUsers from './../components/activeUsers';\nimport Messages from './../components/messages';\nimport moment from 'moment';\n\nvar socket;\nconst initialState = {\n    users: [],\n    messages: [],\n    newMsg: '',\n}\n\nclass Chat extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            ...initialState\n        }\n    }\n\n    componentWillUnmount(){\n        const param = {\n            room: this.props.match.params.room\n        }\n        socket.emit('leave', param);\n        this.setState({...initialState});\n    }\n\n    componentDidMount() {\n        const scopeThis = this;\n        const params = {\n            name: this.props.match.params.name,\n            room: this.props.match.params.room\n        }\n\n        socket = io('http://192.168.0.104:8080')\n\n        socket.emit('join', params, function (err) {\n            if (err) {\n                this.props.history.push('/');\n            }\n        });\n\n        socket.on('updateUserList', function (users) {\n            scopeThis.setState({\n                users\n            });\n        });\n\n        socket.on('newMessage', (message) => {\n            var formattedTime = moment(message.createdDate).format('h:mm a');\n            let newMsg = {\n                text: message.text,\n                from: message.from,\n                room: message.room,\n                createdDate: formattedTime\n            }\n            let results = scopeThis.state.messages;\n            results.push(newMsg);\n            scopeThis.setState({\n                messages: results\n            });\n\n            var msgArr = scopeThis.state.messages.filter(message => message.room === this.props.match.params.room);\n            if (msgArr.length > 3) {\n                scopeThis.scrollToBottom();\n            }\n        });\n\n\n        socket.on('disconnect', function () {\n            console.log('Connection lost from server.');\n        });\n\n    }\n\n    scrollToBottom() {\n        // selectors\n        var listHeight = document.querySelector('.messages #list ul');\n        var messagesList = document.querySelector('.messages #list');\n        var newMessage = document.querySelector('.messages #list ul li:last-child');\n        // heights\n        var messagesWrapperHeight = listHeight.clientHeight;\n        var clientHeight = messagesList.clientHeight;\n        var scrollTop = messagesList.scrollTop;\n        var scrollHeight = messagesList.scrollHeight;\n        var newMessageHeight = newMessage.offsetHeight;\n        var lastMessageHeight = newMessage.previousSibling.offsetHeight;\n\n        if (clientHeight + scrollTop + newMessageHeight + lastMessageHeight >= scrollHeight) {\n            document.querySelector('#list').scrollTo(0, messagesWrapperHeight)\n        }\n\n    }\n\n    clearForm() {\n        this.setState({\n            newMsg: ''\n        });\n    }\n\n    inputUpdate(e) {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState({\n            [name]: value\n        });\n    }\n\n    newMessage(e) {\n        e.preventDefault()\n        var obj = {\n            'text': this.state.newMsg\n        };\n        socket.emit('createMessage', obj, function (data) { });\n        this.clearForm();\n    }\n\n\n    render() {\n\n        const { newMsg } = this.state;\n\n        return (\n            <div className=\"chatPage\">\n\n                <ActiveUsers users={this.state.users} />\n\n                <div className=\"messages_wrap\">\n\n                    <h1>\n                        <Link to=\"/\">\n                            <i className=\"fas fa-chevron-circle-left\"></i>\n                        </Link>\n                        {this.props.match.params.room}\n                    </h1>\n\n                    <Messages messages={this.state.messages} room={this.props.match.params.room} />\n\n                    <div className=\"newMsgForm\">\n                        <div className=\"wrap\">\n                            <form onSubmit={(e) => this.newMessage(e)}>\n\n                                <div className=\"form_wrap\">\n                                    <div className=\"form_row\">\n                                        <div className=\"form_item\">\n                                            <div className=\"form_input\">\n                                                <input name=\"newMsg\" placeholder=\"Type your message...\" autoComplete=\"off\" value={newMsg} onChange={this.inputUpdate.bind(this)} />\n                                                <span className=\"bottom_border\"></span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"btnWrap\">\n                                    <button type=\"submit\" className=\"btn\">\n                                        <i className=\"fab fa-telegram-plane\"></i>\n                                    </button>\n                                </div>\n                            </form>\n                        </div>\n\n                    </div>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Chat);","import React, { Component } from 'react';\n\nclass ActiveUsers extends Component {\n    render() {\n        return (\n            <div className=\"activeUsers\">\n                <h2 className=\"headline\">\n                    Active users\n                </h2>\n                <div id=\"users\">\n                    <ul>\n                        {this.props.users.map((user, index) => (\n                            <li key={index}>\n                                <i className=\"fas fa-circle\"></i>\n                                <span>\n                                    {user}\n                                </span>\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default ActiveUsers;","import React, { Component } from 'react';\n\nclass Messages extends Component {\n    render() {\n        return (\n            <div className=\"messages\">\n                <div id=\"list\">\n                    <ul>\n                        {this.props.messages.filter(message => message.room === this.props.room).map((message, index) => (\n                            <li key={index}>\n\n                                {!message.url &&\n                                    <div>\n                                        <div className=\"msg\">\n                                            <h4>{message.from}</h4>\n                                            <div className=\"body\">\n                                                <p>{message.text}</p>\n                                            </div>\n                                        </div>\n                                        <span className=\"createdDate\">{message.createdDate}</span>\n                                    </div>\n                                }\n\n                            </li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Messages;","import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst initialState = {\n    name: '',\n    room: ''\n}\n\nclass Join extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            ...initialState\n        }\n    }\n\n    clearForm() {\n        this.setState({\n            ...initialState\n        });\n    }\n\n    inputUpdate(e) {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState({\n            [name]: value\n        });\n    }\n\n    join() {\n        const { name, room } = this.state;\n        if (name && room) {\n            this.props.history.push(`/chat/${name}/${room}`)\n        }\n    }\n\n    render() {\n\n        const { name } = this.state;\n\n        return (\n            <div className=\"joinForm\">\n\n                <div className=\"form_wrap\">\n                    <div className=\"form_row\">\n                        <div className=\"form_item\">\n                            <div className=\"form_input\">\n                                <input type=\"text\" placeholder=\"Full Name\" autoComplete=\"off\" name=\"name\" value={name} onChange={this.inputUpdate.bind(this)} />\n                                <span className=\"bottom_border\"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"form_row\">\n                        <div className=\"form_item\">\n                            <div className=\"form_select\">\n                                <select name=\"room\" onChange={this.inputUpdate.bind(this)}>\n                                    <option value=\"\">Please select a group</option>\n                                    <option value=\"React JS\">Delphins</option>\n                                    <option value=\"Node JS\">soal</option>\n                                </select>\n                                <i className=\"fas fa-chevron-down\"></i>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"form_buttons\">\n                        <button onClick={() => this.join()} className=\"btn\">\n                            Join\n                        </button>\n                    </div>\n                </div>\n\n\n\n\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Join);","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport classNames from 'classnames';\nimport './assets/scss/styles.scss';\n\nimport Chat from './pages/chat';\nimport Join from './pages/join';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      site_loaded: false\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      site_loaded: true\n    });\n  }\n\n  render() {\n    return (\n      <div className={classNames({'App': true, 'site_loaded': this.state.site_loaded})}>\n        <Router>\n          <Switch>\n            <Route path=\"/chat/:name/:room\" component={Chat} />\n            <Route path=\"/\" component={Join} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}