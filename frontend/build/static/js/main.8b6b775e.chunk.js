(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{55:function(e,t,a){e.exports=a(97)},60:function(e,t,a){},89:function(e,t){},97:function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),c=a(49),o=a.n(c),l=a(4),m=a(5),i=a(7),u=a(6),p=a(14),h=a(9),f=a(50),v=a.n(f),d=(a(60),a(12)),E=a(13),b=a(51),g=a.n(b),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"activeUsers"},r.a.createElement("h2",{className:"headline"},"Active users"),r.a.createElement("div",{id:"users"},r.a.createElement("ul",null,this.props.users.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("i",{className:"fas fa-circle"}),r.a.createElement("span",null,e))})))))}}]),a}(s.Component),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"messages"},r.a.createElement("div",{id:"list"},r.a.createElement("ul",null,this.props.messages.filter((function(t){return t.room===e.props.room})).map((function(e,t){return r.a.createElement("li",{key:t},!e.url&&r.a.createElement("div",null,r.a.createElement("div",{className:"msg"},r.a.createElement("h4",null,e.from),r.a.createElement("div",{className:"body"},r.a.createElement("p",null,e.text))),r.a.createElement("span",{className:"createdDate"},e.createdDate)))})))))}}]),a}(s.Component),y=a(52),O=a.n(y),k={users:[],messages:[],newMsg:""},w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state=Object(E.a)({},k),n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){var e={room:this.props.match.params.room};n.emit("leave",e),this.setState(Object(E.a)({},k))}},{key:"componentDidMount",value:function(){var e=this,t=this,a={name:this.props.match.params.name,room:this.props.match.params.room};(n=g()("http://192.168.0.104:8080")).emit("join",a,(function(e){e&&this.props.history.push("/")})),n.on("updateUserList",(function(e){t.setState({users:e})})),n.on("newMessage",(function(a){var n=O()(a.createdDate).format("h:mm a"),s={text:a.text,from:a.from,room:a.room,createdDate:n},r=t.state.messages;r.push(s),t.setState({messages:r}),t.state.messages.filter((function(t){return t.room===e.props.match.params.room})).length>3&&t.scrollToBottom()})),n.on("disconnect",(function(){console.log("Connection lost from server.")}))}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".messages #list ul"),t=document.querySelector(".messages #list"),a=document.querySelector(".messages #list ul li:last-child"),n=e.clientHeight,s=t.clientHeight,r=t.scrollTop,c=t.scrollHeight;s+r+a.offsetHeight+a.previousSibling.offsetHeight>=c&&document.querySelector("#list").scrollTo(0,n)}},{key:"clearForm",value:function(){this.setState({newMsg:""})}},{key:"inputUpdate",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(d.a)({},t,a))}},{key:"newMessage",value:function(e){e.preventDefault();var t={text:this.state.newMsg};n.emit("createMessage",t,(function(e){})),this.clearForm()}},{key:"render",value:function(){var e=this,t=this.state.newMsg;return r.a.createElement("div",{className:"chatPage"},r.a.createElement(N,{users:this.state.users}),r.a.createElement("div",{className:"messages_wrap"},r.a.createElement("h1",null,r.a.createElement(p.b,{to:"/"},r.a.createElement("i",{className:"fas fa-chevron-circle-left"})),this.props.match.params.room),r.a.createElement(j,{messages:this.state.messages,room:this.props.match.params.room}),r.a.createElement("div",{className:"newMsgForm"},r.a.createElement("div",{className:"wrap"},r.a.createElement("form",{onSubmit:function(t){return e.newMessage(t)}},r.a.createElement("div",{className:"form_wrap"},r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_input"},r.a.createElement("input",{name:"newMsg",placeholder:"Type your message...",autoComplete:"off",value:t,onChange:this.inputUpdate.bind(this)}),r.a.createElement("span",{className:"bottom_border"}))))),r.a.createElement("div",{className:"btnWrap"},r.a.createElement("button",{type:"submit",className:"btn"},r.a.createElement("i",{className:"fab fa-telegram-plane"}))))))))}}]),a}(s.Component),_=Object(h.f)(w),S={name:"",room:""},C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state=Object(E.a)({},S),e}return Object(m.a)(a,[{key:"clearForm",value:function(){this.setState(Object(E.a)({},S))}},{key:"inputUpdate",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(d.a)({},t,a))}},{key:"join",value:function(){var e=this.state,t=e.name,a=e.room;t&&a&&this.props.history.push("/chat/".concat(t,"/").concat(a))}},{key:"render",value:function(){var e=this,t=this.state.name;return r.a.createElement("div",{className:"joinForm"},r.a.createElement("div",{className:"form_wrap"},r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_input"},r.a.createElement("input",{type:"text",placeholder:"Full Name",autoComplete:"off",name:"name",value:t,onChange:this.inputUpdate.bind(this)}),r.a.createElement("span",{className:"bottom_border"})))),r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_select"},r.a.createElement("select",{name:"room",onChange:this.inputUpdate.bind(this)},r.a.createElement("option",{value:""},"Please select a group"),r.a.createElement("option",{value:"React JS"},"Delphins"),r.a.createElement("option",{value:"Node JS"},"soal")),r.a.createElement("i",{className:"fas fa-chevron-down"})))),r.a.createElement("div",{className:"form_buttons"},r.a.createElement("button",{onClick:function(){return e.join()},className:"btn"},"Join"))))}}]),a}(s.Component),M=Object(h.f)(C),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={site_loaded:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({site_loaded:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:v()({App:!0,site_loaded:this.state.site_loaded})},r.a.createElement(p.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/chat/:name/:room",component:_}),r.a.createElement(h.a,{path:"/",component:M}))))}}]),a}(s.Component);o.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.8b6b775e.chunk.js.map